!function(){"use strict";function t(){return Y.y-h.height/2}function e(){var e=t(),i=e+h.height;return d.filter(function(t){return t.y>e&&t.y<i})}function i(e,i){i=i||0;var l=t();return h.height-(e-l)-i}function l(){var t=e();t.forEach(function(t){v.fillStyle="#ff3300",v.fillRect(t.x,i(t.y,u),t.width,2)})}function n(){v.fillStyle="#000000",v.fillRect(Y.x,i(Y.y,s),20,20)}function c(){var e=15,i=5,l=14,n=Object.keys(Y).map(function(t){return t+": "+Y[t]}).concat(["offset: "+t()]);v.font="10pt Helvetica";var c=n.reduce(function(t,e){return Math.max(t,v.measureText(e).width)},0);v.fillStyle="rgba(0,0,0,0.8)",v.fillRect(0,0,c+2*i,(n.length-1)*l+2*e),v.fillStyle="lime",n.forEach(function(t,n){v.fillText(t,i,n*l+e)})}function o(){v.clearRect(0,0,h.width,h.height)}function a(){if(!X){var t=Date.now(),i=(t-b)/1e3;b=t;var l=i*x,n=e().filter(function(t){return Y.x+g+1>=t.x&&Y.x<=t.x+t.width}),c=Math.round(Y.y),o=n.some(function(t){return c===t.y+u});Y.isOnPlatform=o,Y.velocityX>0?Y.velocityX=Math.max(0,Y.velocityX-l):Y.velocityX<0&&(Y.velocityX=Math.min(0,Y.velocityX+l)),Y.velocityY=Math.max(-m,Y.velocityY-l),o&&Y.velocityY<0&&(Y.velocityY=0),Y.x+=Y.velocityX;var f=Y.velocityY<0&&n.filter(function(t){return Y.y>t.y&&Y.y+Y.velocityY<=t.y})[0];f?(Y.y=f.y+u,Y.velocityY=0,Y.isOnPlatform=!0):Y.y+=Y.velocityY,Y.y<0?(X=!0,v.fillStyle="rgba(255,0,0,0.8)",v.fillRect(h.width/2-60,h.height/2-40,120,80),v.font="40pt Helvetica",v.fillStyle="black",v.fillText("Game over",h.width/2-50,h.height/2+10)):(y(),requestAnimationFrame(a))}}function y(){o(),r&&c(),l(),n()}function f(t){switch(t.keyCode){case 38:Y.velocityY=Math.min(Y.velocityY+w,m);break;case 40:Y.velocityY=Math.max(Y.velocityY-w,-m);break;case 37:Y.velocityX=Math.max(Y.velocityX-w,-m);break;case 39:Y.velocityX=Math.min(Y.velocityX+w,m)}}var r=!0,h=document.getElementById("game-window"),v=h.getContext("2d"),u=2,d=[{x:h.width/2-20,y:h.height/2-u,width:40}],m=10,w=1,x=.5,s=20,g=20,Y={x:d[0].x+d[0].width/2-g/2,y:d[0].y+u,velocityX:0,velocityY:0,isOnPlatform:!0},X=!1,b=Date.now();h.onclick=function(){X=!X,X?(v.fillStyle="rgba(0,0,255,0.8)",v.fillRect(h.width/2-60,h.height/2-40,120,80),v.font="40pt Helvetica",v.fillStyle="black",v.fillText("Paused",h.width/2-50,h.height/2+10)):(b=Date.now(),a())},window.addEventListener("keydown",f,!0),a()}();